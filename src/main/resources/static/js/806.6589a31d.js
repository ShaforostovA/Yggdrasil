"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[806],{573:function(t,e,a){var s=a(4161),r=a(2479);a(3456);const i="http://10.100.124.9/api/v1/department/";class n{getUserDepartmentAllUsers(t){return s.Z.get(i+`users/list/${t}`,{headers:(0,r.Z)()})}getDepartmentsAll(){return s.Z.get(i+"all",{headers:(0,r.Z)()})}getDepartmentsAllSearch(t,e,a,n,l,o,d,u){let c=JSON.stringify({parameter:t,currentPage:e,sortField:a,sortDir:n,facultyName:l,isActive:o,minDate:d,maxDate:u}),h={method:"post",maxBodyLength:1/0,url:i+"search/all",headers:(0,r.Z)(),data:c};return s.Z.request(h)}getDepartmentsActiveAll(){return s.Z.get(i+"active/all",{headers:(0,r.Z)()})}updateDepartment(t,e,a,n,l){let o=JSON.stringify({id:t,shortName:e,name:a,description:n,facultyId:Number(l)}),d={method:"post",maxBodyLength:1/0,url:i+"update",headers:(0,r.Z)(),data:o};return s.Z.request(d)}createDepartment(t,e,a,n,l){let o=JSON.stringify({id:t,shortName:e,name:a,description:n,facultyId:Number(l)}),d={method:"post",maxBodyLength:1/0,url:i+"create",headers:(0,r.Z)(),data:o};return s.Z.request(d)}}e["Z"]=new n},7882:function(t,e,a){var s=a(4161),r=a(2479);const i="http://10.100.124.9/api/v1/documents/";class n{getDocument(t){return s.Z.get(i+`${t}`,{headers:(0,r.Z)()})}getDocuments(t,e,a,n,l,o,d,u,c){let h=JSON.stringify({typeSearch:t,parameter:e,currentPage:a,sortField:n,sortDir:l,statusName:o,minDate:d,maxDate:u,documentType:c}),p={method:"post",maxBodyLength:1/0,url:i+"all",headers:(0,r.Z)(),data:h};return s.Z.request(p)}getDocumentStructures(){return s.Z.get(i+"structures/short",{headers:(0,r.Z)()})}getDocumentStructure(t){return s.Z.get(i+`structures/${t}`,{headers:(0,r.Z)()})}createDocument(t,e,a,n){let l=JSON.stringify({documentData:JSON.stringify(n),documentStatusId:Number(a),documentStructureId:Number(e),username:t}),o={method:"post",maxBodyLength:1/0,url:i+"create",headers:(0,r.Z)(),data:l};return s.Z.request(o)}deleteDocument(t){return s.Z["delete"](i+"delete/"+t,{headers:(0,r.Z)()})}updateDocumentStatus(t,e){let a=JSON.stringify({documentStatusId:JSON.stringify(e)}),n={method:"post",maxBodyLength:1/0,url:i+`${t}/status/update`,headers:(0,r.Z)(),data:a};return s.Z.request(n)}updateDocumentData(t,e){let a=JSON.stringify({documentData:JSON.stringify(e)}),n={method:"post",maxBodyLength:1/0,url:i+`${t}/data/update`,headers:(0,r.Z)(),data:a};return s.Z.request(n)}getUserStatistics(t,e,a){let n=JSON.stringify({minDate:e,maxDate:a}),l={method:"post",maxBodyLength:1/0,url:i+`statistic/user/${t}`,headers:(0,r.Z)(),data:n};return s.Z.request(l)}getDepartmentStatistics(t,e,a){let n=JSON.stringify({minDate:e,maxDate:a}),l={method:"post",maxBodyLength:1/0,url:i+`statistic/department/${t}`,headers:(0,r.Z)(),data:n};return s.Z.request(l)}getFacultayStatistics(t,e,a){let n=JSON.stringify({minDate:e,maxDate:a}),l={method:"post",maxBodyLength:1/0,url:i+`statistic/faculty/${t}`,headers:(0,r.Z)(),data:n};return s.Z.request(l)}getAllStatistics(t,e){let a=JSON.stringify({minDate:t,maxDate:e}),n={method:"post",maxBodyLength:1/0,url:i+"statistic/all",headers:(0,r.Z)(),data:a};return s.Z.request(n)}getAllDocumentTypes(){return s.Z.get(i+"types/all",{headers:(0,r.Z)()})}checkDocumentTypeName(t){let e=JSON.stringify({name:t}),a={method:"post",maxBodyLength:1/0,url:i+"types/check",headers:(0,r.Z)(),data:e};return s.Z.request(a)}createDocumentType(t){let e=JSON.stringify({name:t}),a={method:"post",maxBodyLength:1/0,url:i+"types/create",headers:(0,r.Z)(),data:e};return s.Z.request(a)}getAdminDocumentStructures(t,e,a,n,l,o,d,u){let c=JSON.stringify({parameter:t,currentPage:e,sortField:a,sortDir:n,isActive:l,minDate:o,maxDate:d,documentTypeName:u}),h={method:"post",maxBodyLength:1/0,url:i+"structures/short/admin",headers:(0,r.Z)(),data:c};return s.Z.request(h)}createDocumentStructure(t,e,a,n,l){let o=JSON.stringify({id:t,name:e,description:a,documentTypeId:n,structureData:JSON.stringify(l)}),d={method:"post",maxBodyLength:1/0,url:i+"structures/create",headers:(0,r.Z)(),data:o};return s.Z.request(d)}updateDocumentStructure(t,e,a,n,l){let o=JSON.stringify({id:t,name:e,description:a,documentTypeId:n,structureData:JSON.stringify(l)}),d={method:"post",maxBodyLength:1/0,url:i+"structures/update",headers:(0,r.Z)(),data:o};return s.Z.request(d)}updateStatusDocumentStructure(t,e){let a=JSON.stringify({id:t,isActive:Boolean(e)}),n={method:"post",maxBodyLength:1/0,url:i+"structures/status/update",headers:(0,r.Z)(),data:a};return s.Z.request(n)}checkDocumentStructure(t){return s.Z.get(i+`structures/${t}/check`,{headers:(0,r.Z)()})}updateStatusDocumentsByStructureId(t){let e=JSON.stringify({id:t}),a={method:"post",maxBodyLength:1/0,url:i+"status/update/remake",headers:(0,r.Z)(),data:e};return s.Z.request(a)}getNewDocumentStructures(t){let e=JSON.stringify({oldDocumentStructureId:t}),a={method:"post",maxBodyLength:1/0,url:i+"structures/new/all",headers:(0,r.Z)(),data:e};return s.Z.request(a)}getAllFacultyDocuments(t,e,a,n){let l=JSON.stringify({documentStructureId:t,facultyId:e,minDate:a,maxDate:n}),o={method:"post",maxBodyLength:1/0,url:i+"faculty/all",headers:(0,r.Z)(),data:l};return s.Z.request(o)}getAllDepartmentDocuments(t,e,a,n){let l=JSON.stringify({documentStructureId:t,departmentId:e,minDate:a,maxDate:n}),o={method:"post",maxBodyLength:1/0,url:i+"department/all",headers:(0,r.Z)(),data:l};return s.Z.request(o)}archivingDocuments(t,e,a,n){let l=JSON.stringify({documentStructureId:t,documentStatusId:e,minDate:a,maxDate:n}),o={method:"post",maxBodyLength:1/0,url:i+"archiving",headers:(0,r.Z)(),data:l};return s.Z.request(o)}documentExportToExcel(t,e,a,n,l){let o=JSON.stringify({documentStructures:t,facultyId:e,departmentId:a,minDate:n,maxDate:l}),d={method:"post",maxBodyLength:1/0,url:i+"export",headers:(0,r.Z)(),responseType:"blob",data:o};return s.Z.request(d)}documentCombinedExportToExcel(t,e,a,n,l){let o=JSON.stringify({documentStructures:t,facultyList:e,departmentList:a,minDate:n,maxDate:l}),d={method:"post",maxBodyLength:1/0,url:i+"combined/export",headers:(0,r.Z)(),responseType:"blob",data:o};return s.Z.request(d)}updateDocumentType(t,e){let a=JSON.stringify({documentTypeName:e}),n={method:"post",maxBodyLength:1/0,url:i+"types/update/"+t,headers:(0,r.Z)(),data:a};return s.Z.request(n)}}e["Z"]=new n},6749:function(t,e,a){var s=a(4161),r=a(2479);const i="http://10.100.124.9/api/v1/faculty/";class n{getAllFaculty(){return s.Z.get(i+"all",{headers:(0,r.Z)()})}getAllFacultySearch(t,e,a,n,l,o,d){let u=JSON.stringify({parameter:t,currentPage:e,sortField:a,sortDir:n,isActive:l,minDate:o,maxDate:d}),c={method:"post",maxBodyLength:1/0,url:i+"search/all",headers:(0,r.Z)(),data:u};return s.Z.request(c)}getAllActiveFaculty(){return s.Z.get(i+"active/all",{headers:(0,r.Z)()})}getFaculty(t){return s.Z.get(i+t,{headers:(0,r.Z)()})}updateFaculty(t,e,a,n){let l=JSON.stringify({id:Number(t),shortName:e,name:a,description:n}),o={method:"post",maxBodyLength:1/0,url:i+"update",headers:(0,r.Z)(),data:l};return s.Z.request(o)}createFaculty(t,e,a){let n=JSON.stringify({id:null,shortName:t,name:e,description:a}),l={method:"post",maxBodyLength:1/0,url:i+"create",headers:(0,r.Z)(),data:n};return s.Z.request(l)}}e["Z"]=new n},5753:function(t,e,a){var s=a(4161),r=a(2479),i=a(3456);const n="http://10.100.124.9/api/v1/user/";class l{getUserInfo(){return s.Z.get(n+this.currentUser().username,{headers:(0,r.Z)()})}getEmployeeInfo(t){return s.Z.get(n+`profile/${t}/info`,{headers:(0,r.Z)()})}getUserFaculty(t){return s.Z.get(n+`${t}/faculty`,{headers:(0,r.Z)()})}getUserDepartment(t){return s.Z.get(n+`${t}/department`,{headers:(0,r.Z)()})}userTokenCheck(){return console.log((0,r.Z)()),s.Z.get(n+"token/check",{headers:(0,r.Z)()})}getAllUsers(){return s.Z.get(n+"list",{headers:(0,r.Z)()})}getAllDepartmentUsers(){return s.Z.get(n+"department/list",{headers:(0,r.Z)()})}getAllUsersFind(t,e,a,i,l,o,d,u,c,h){let p=JSON.stringify({parameter:t,currentPage:e,sortField:a,sortDir:i,minDate:l,maxDate:o,departmentName:d,isState:u,userRole:c,isActive:h}),m={method:"post",maxBodyLength:1/0,url:n+"list/find",headers:(0,r.Z)(),data:p};return s.Z.request(m)}updateProfile(t,e,a,i,l,o,d,u,c,h,p,m,g,y,w){let f=JSON.stringify({id:t,phone:e,email:a,imgUrl:i,lastName:l,name:o,patronymic:d,jobTitle:u,academicTitle:c,academicDegree:h,orcid:p,spinCode:m,birthday:g,state:y,departmentId:w}),x={method:"post",maxBodyLength:1/0,url:n+"update",headers:(0,r.Z)(),data:f};return s.Z.request(x)}checkValidUsername(t){let e=JSON.stringify({username:t}),a={method:"post",maxBodyLength:1/0,url:n+"username/check",headers:(0,r.Z)(),data:e};return s.Z.request(a)}createUser(t,e,a,i,l,o,d,u){let c=JSON.stringify({lastName:t,name:e,patronymic:a,state:i,departmentId:Number(l),username:o,password:d,userRole:u}),h={method:"post",maxBodyLength:1/0,url:n+"create",headers:(0,r.Z)(),data:c};return s.Z.request(h)}updateUserStatus(t,e){let a=JSON.stringify({userId:Number(t),isActive:e}),i={method:"post",maxBodyLength:1/0,url:n+"status/update",headers:(0,r.Z)(),data:a};return s.Z.request(i)}updateUserPassword(t,e){let a=JSON.stringify({userId:Number(t),password:e}),i={method:"post",maxBodyLength:1/0,url:n+"password/update",headers:(0,r.Z)(),data:a};return s.Z.request(i)}currentUser(){return i.Z.state.auth.user}}e["Z"]=new l},4806:function(t,e,a){a.r(e),a.d(e,{default:function(){return ye}});var s=a(3396),r=a(9242),i=a(7139);const n=(0,s._)("div",{class:"chapter-name text-3xl mb-6"}," Статистика ",-1),l={class:"flex gap-x-5 flex-grow"},o={class:"menu w-1/5"},d={class:"w-4/5 flex flex-col mb-6"},u={class:"menu-top mb-6 flex justify-between"},c=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),h={class:"statistic-content"},p={class:"row"},m={class:"col s12 mb-9"},g={class:"tabs flex justify-center gap-3"},y={key:0,class:"tab col s3 rounded-lg overflow-hidden text-xl py-2"},w={key:1,class:"tab col s3 rounded-lg overflow-hidden text-xl py-2"},f={key:2,class:"tab col s3 rounded-lg overflow-hidden text-xl py-2"},x={key:3,class:"tab col s3 rounded-lg overflow-hidden text-xl py-2"},D={key:4,class:"tab col s3 rounded-lg overflow-hidden text-xl py-2"},v={key:0,id:"personalStatistics",class:"personalStatistics col s12 shadow-md rounded-xl border p-5"},S={class:"status-data-menu mb-20 flex justify-between gap-3"},k={class:"status-data-menu-date flex gap-5"},b=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"Период с",-1),C=["max"],Z=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"по",-1),_=["min"],N=(0,s._)("div",{class:"whitespace-nowrap self-end text-sm"},"(не включительнно)",-1),U={class:"text-xl self-end"},L=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})],-1),A=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})],-1),T={key:1,id:"userStatistics",class:"userStatistics col s12 shadow-md rounded-xl border p-5"},q={class:"status-data-menu mb-20 flex justify-between gap-3"},B={class:"status-data-menu-date flex gap-5"},O=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"Период с",-1),z=["max"],J=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"по",-1),j=["min"],I=(0,s._)("div",{class:"whitespace-nowrap self-end text-sm"},"(не включительнно)",-1),F={class:"text-xl self-end"},V={class:"flex gap-3"},$={class:"input-field col s12 m6 selectSingleImage mb-5 w-full"},P={class:"icons"},E=(0,s._)("option",{value:"",disabled:""},"Выберите сотрудника",-1),H=["value","data-icon"],R=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),W=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})],-1),Y=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})],-1),K={key:2,id:"departmentStatistics",class:"departmentStatistics col s12 shadow-md rounded-xl border p-5"},G={class:"status-data-menu mb-20 flex justify-between gap-3"},Q={class:"status-data-menu-date flex gap-5"},X=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"Период с",-1),tt=["max"],et=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"по",-1),at=["min"],st=(0,s._)("div",{class:"whitespace-nowrap self-end text-sm"},"(не включительнно)",-1),rt={class:"text-xl self-end"},it={key:0,class:"flex gap-3"},nt={class:"input-field col s12 m6 selectSingle mb-5 w-full"},lt=["disabled"],ot=(0,s._)("option",{value:"",disabled:""},"Выберите кафедру",-1),dt=["value"],ut=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),ct=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})],-1),ht=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})],-1),pt={key:3,id:"facultyStatistics",class:"facultyStatistics col s12 shadow-md rounded-xl border p-5"},mt={class:"status-data-menu mb-20 flex justify-between gap-3"},gt={class:"status-data-menu-date flex gap-5"},yt=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"Период с",-1),wt=["max"],ft=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"по",-1),xt=["min"],Dt=(0,s._)("div",{class:"whitespace-nowrap self-end text-sm"},"(не включительнно)",-1),vt={class:"text-xl self-end"},St={key:0,class:"flex gap-3"},kt={class:"input-field col s12 m6 selectSingle mb-5 w-full"},bt=["disabled"],Ct=(0,s._)("option",{value:"",disabled:""},"Выберите факультет",-1),Zt=["value"],_t=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),Mt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})],-1),Nt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})],-1),Ut={key:4,id:"allStatistics",class:"allStatistics col s12 shadow-md rounded-xl border p-5"},Lt={class:"status-data-menu mb-20 flex justify-between gap-3"},At={class:"status-data-menu-date flex gap-5"},Tt=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"Период с",-1),qt=["max"],Bt=(0,s._)("div",{class:"whitespace-nowrap self-end text-lg"},"по",-1),Ot=["min"],zt=(0,s._)("div",{class:"whitespace-nowrap self-end text-sm"},"(не включительнно)",-1),Jt={class:"text-xl self-end"},jt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})],-1),It=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})],-1);function Ft(t,e,a,M,Ft,Vt){const $t=(0,s.up)("FullScreenLoader"),Pt=(0,s.up)("Sidebar"),Et=(0,s.up)("GChart"),Ht=(0,s.up)("MainTable");return(0,s.wg)(),(0,s.iD)(s.HY,null,[this.loading?((0,s.wg)(),(0,s.j4)($t,{key:0})):(0,s.kq)("",!0),n,(0,s._)("div",l,[(0,s._)("div",o,[(0,s.Wm)(Pt)]),(0,s._)("div",d,[(0,s._)("div",u,[(0,s._)("button",{onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>Vt.back&&Vt.back(...t)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[c,(0,s.Uk)(" Вернуться ")])]),(0,s._)("div",h,[(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("ul",g,[this.currentUser.roles[0]!==this.roleAdmin?((0,s.wg)(),(0,s.iD)("li",y,[(0,s._)("a",{class:"tab-link p-6 rounded-lg",href:"#personalStatistics",onClick:e[1]||(e[1]=(0,r.iM)((t=>Vt.updateSelectTab("Личная")),["prevent"]))},"Личная")])):(0,s.kq)("",!0),this.currentUser.roles[0]!==this.roleUser?((0,s.wg)(),(0,s.iD)("li",w,[(0,s._)("a",{class:"tab-link p-6 rounded-lg",href:"#userStatistics",onClick:e[2]||(e[2]=(0,r.iM)((t=>Vt.updateSelectTab("По пользователю")),["prevent"]))},"По пользователю")])):(0,s.kq)("",!0),this.currentUser.roles[0]!==this.roleUser?((0,s.wg)(),(0,s.iD)("li",f,[(0,s._)("a",{class:"tab-link p-6 rounded-lg",href:"#departmentStatistics",onClick:e[3]||(e[3]=(0,r.iM)((t=>Vt.updateSelectTab("По кафедре")),["prevent"]))},"По кафедре")])):(0,s.kq)("",!0),this.currentUser.roles[0]===this.roleAdmin?((0,s.wg)(),(0,s.iD)("li",x,[(0,s._)("a",{class:"tab-link p-6 rounded-lg",href:"#facultyStatistics",onClick:e[4]||(e[4]=(0,r.iM)((t=>Vt.updateSelectTab("По факультету")),["prevent"]))},"По факультету")])):(0,s.kq)("",!0),this.currentUser.roles[0]===this.roleAdmin?((0,s.wg)(),(0,s.iD)("li",D,[(0,s._)("a",{class:"tab-link p-6 rounded-lg",href:"#allStatistics",onClick:e[5]||(e[5]=(0,r.iM)((t=>Vt.updateSelectTab("По институту")),["prevent"]))},"По институту")])):(0,s.kq)("",!0)])]),this.currentUser.roles[0]!==this.roleAdmin?((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",S,[(0,s._)("div",k,[b,(0,s.wy)((0,s._)("input",{onBlur:e[6]||(e[6]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[7]||(e[7]=t=>this.minDate=t),max:this.maxDate,class:"input-text status-data-menu-date-input"},null,40,C),[[r.nr,this.minDate]]),Z,(0,s.wy)((0,s._)("input",{onBlur:e[8]||(e[8]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[9]||(e[9]=t=>this.maxDate=t),min:this.minDate,class:"input-text status-data-menu-date-input"},null,40,_),[[r.nr,this.maxDate]]),N]),(0,s._)("div",U,"Всего документов: "+(0,i.zw)(this.allCountDocument),1)]),"PieChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[10]||(e[10]=(0,r.iM)((t=>Vt.selectTypeChart("ColumnChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[L,(0,s.Uk)(" Столбчатая диаграмма ")])):"ColumnChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[11]||(e[11]=(0,r.iM)((t=>Vt.selectTypeChart("PieChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[A,(0,s.Uk)(" Круговая диаграмма ")])):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(Et,{type:this.typeChart,options:this.chartOption,data:this.chartData,key:t.chartId},null,8,["type","options","data"])),(0,s.Wm)(Ht,{class:"mb-0",header:t.personalHeader,content:t.content,noDataMessage:t.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,s.kq)("",!0),this.currentUser.roles[0]!==this.roleUser?((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("div",q,[(0,s._)("div",B,[O,(0,s.wy)((0,s._)("input",{onBlur:e[12]||(e[12]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[13]||(e[13]=t=>this.minDate=t),max:this.maxDate,class:"input-text status-data-menu-date-input"},null,40,z),[[r.nr,this.minDate]]),J,(0,s.wy)((0,s._)("input",{onBlur:e[14]||(e[14]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[15]||(e[15]=t=>this.maxDate=t),min:this.minDate,class:"input-text status-data-menu-date-input"},null,40,j),[[r.nr,this.maxDate]]),I]),(0,s._)("div",F,"Всего документов: "+(0,i.zw)(this.allCountDocument),1)]),(0,s._)("div",V,[(0,s._)("div",$,[(0,s._)("select",P,[E,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.employeesList,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id,"data-icon":t.imgUrl},(0,i.zw)(`${t.lastName} ${t.name[0]}. ${t.patronymic[0]}. (№${t.id})`),9,H)))),128))])]),(0,s._)("button",{onClick:e[16]||(e[16]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),class:"main-btn px-5 py-2 text-xl inline-flex items-center self-start",type:"submit"},[R,(0,s.Uk)(" Найти ")])]),"PieChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[17]||(e[17]=(0,r.iM)((t=>Vt.selectTypeChart("ColumnChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[W,(0,s.Uk)(" Столбчатая диаграмма ")])):"ColumnChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[18]||(e[18]=(0,r.iM)((t=>Vt.selectTypeChart("PieChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[Y,(0,s.Uk)(" Круговая диаграмма ")])):(0,s.kq)("",!0),(0,s.Wm)(Et,{type:this.typeChart,options:this.chartOption,data:this.chartData},null,8,["type","options","data"]),(0,s.Wm)(Ht,{class:"mb-0",header:t.personalHeader,content:t.content,noDataMessage:t.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,s.kq)("",!0),this.currentUser.roles[0]!==this.roleUser?((0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",G,[(0,s._)("div",Q,[X,(0,s.wy)((0,s._)("input",{onBlur:e[19]||(e[19]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[20]||(e[20]=t=>this.minDate=t),max:this.maxDate,class:"input-text status-data-menu-date-input"},null,40,tt),[[r.nr,this.minDate]]),et,(0,s.wy)((0,s._)("input",{onBlur:e[21]||(e[21]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[22]||(e[22]=t=>this.maxDate=t),min:this.minDate,class:"input-text status-data-menu-date-input"},null,40,at),[[r.nr,this.maxDate]]),st]),(0,s._)("div",rt,"Всего документов: "+(0,i.zw)(this.allCountDocument),1)]),"ROLE_ADMIN"===this.currentUser.roles[0]?((0,s.wg)(),(0,s.iD)("div",it,[(0,s._)("div",nt,[(0,s._)("select",{disabled:"ROLE_ADMIN"!==this.currentUser.roles[0]},[ot,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.departmentList,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,i.zw)(t.name),9,dt)))),128))],8,lt)]),(0,s._)("button",{onClick:e[23]||(e[23]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),class:"main-btn px-5 py-2 text-xl inline-flex items-center self-start",type:"submit"},[ut,(0,s.Uk)(" Найти ")])])):(0,s.kq)("",!0),"PieChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[24]||(e[24]=(0,r.iM)((t=>Vt.selectTypeChart("ColumnChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[ct,(0,s.Uk)(" Столбчатая диаграмма ")])):"ColumnChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:e[25]||(e[25]=(0,r.iM)((t=>Vt.selectTypeChart("PieChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[ht,(0,s.Uk)(" Круговая диаграмма ")])):(0,s.kq)("",!0),(0,s.Wm)(Et,{type:this.typeChart,options:this.chartOption,data:this.chartData},null,8,["type","options","data"]),(0,s.Wm)(Ht,{class:"mb-0",header:t.personalHeader,content:t.content,noDataMessage:t.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,s.kq)("",!0),this.currentUser.roles[0]===this.roleAdmin?((0,s.wg)(),(0,s.iD)("div",pt,[(0,s._)("div",mt,[(0,s._)("div",gt,[yt,(0,s.wy)((0,s._)("input",{onBlur:e[26]||(e[26]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[27]||(e[27]=t=>this.minDate=t),max:this.maxDate,class:"input-text status-data-menu-date-input"},null,40,wt),[[r.nr,this.minDate]]),ft,(0,s.wy)((0,s._)("input",{onBlur:e[28]||(e[28]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[29]||(e[29]=t=>this.maxDate=t),min:this.minDate,class:"input-text status-data-menu-date-input"},null,40,xt),[[r.nr,this.maxDate]]),Dt]),(0,s._)("div",vt,"Всего документов: "+(0,i.zw)(this.allCountDocument),1)]),"ROLE_ADMIN"===this.currentUser.roles[0]?((0,s.wg)(),(0,s.iD)("div",St,[(0,s._)("div",kt,[(0,s._)("select",{disabled:"ROLE_ADMIN"!==this.currentUser.roles[0]},[Ct,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.facultyList,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,i.zw)(t.name),9,Zt)))),128))],8,bt)]),(0,s._)("button",{onClick:e[30]||(e[30]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),class:"main-btn px-5 py-2 text-xl inline-flex items-center self-start",type:"submit"},[_t,(0,s.Uk)(" Найти ")])])):(0,s.kq)("",!0),"PieChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[31]||(e[31]=(0,r.iM)((t=>Vt.selectTypeChart("ColumnChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[Mt,(0,s.Uk)(" Столбчатая диаграмма ")])):"ColumnChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:e[32]||(e[32]=(0,r.iM)((t=>Vt.selectTypeChart("PieChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[Nt,(0,s.Uk)(" Круговая диаграмма ")])):(0,s.kq)("",!0),(0,s.Wm)(Et,{type:this.typeChart,options:this.chartOption,data:this.chartData},null,8,["type","options","data"]),(0,s.Wm)(Ht,{class:"mb-0",header:t.personalHeader,content:t.content,noDataMessage:t.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,s.kq)("",!0),this.currentUser.roles[0]===this.roleAdmin?((0,s.wg)(),(0,s.iD)("div",Ut,[(0,s._)("div",Lt,[(0,s._)("div",At,[Tt,(0,s.wy)((0,s._)("input",{onBlur:e[33]||(e[33]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[34]||(e[34]=t=>this.minDate=t),max:this.maxDate,class:"input-text status-data-menu-date-input"},null,40,qt),[[r.nr,this.minDate]]),Bt,(0,s.wy)((0,s._)("input",{onBlur:e[35]||(e[35]=(0,r.iM)(((...t)=>Vt.updateData&&Vt.updateData(...t)),["prevent"])),type:"date","onUpdate:modelValue":e[36]||(e[36]=t=>this.maxDate=t),min:this.minDate,class:"input-text status-data-menu-date-input"},null,40,Ot),[[r.nr,this.maxDate]]),zt]),(0,s._)("div",Jt,"Всего документов: "+(0,i.zw)(this.allCountDocument),1)]),"PieChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[37]||(e[37]=(0,r.iM)((t=>Vt.selectTypeChart("ColumnChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[jt,(0,s.Uk)(" Столбчатая диаграмма ")])):"ColumnChart"===this.typeChart?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[38]||(e[38]=(0,r.iM)((t=>Vt.selectTypeChart("PieChart")),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[It,(0,s.Uk)(" Круговая диаграмма ")])):(0,s.kq)("",!0),(0,s.Wm)(Et,{type:this.typeChart,options:this.chartOption,data:this.chartData},null,8,["type","options","data"]),(0,s.Wm)(Ht,{class:"mb-0",header:t.personalHeader,content:t.content,noDataMessage:t.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,s.kq)("",!0)])])])])],64)}a(7658);var Vt=a(2435),$t=a(7901),Pt=a(6833),Et=a(7882),Ht=a(5753),Rt=a(573),Wt=a(6749),Yt=a(2461),Kt=a(8806),Gt=a(4870);const Qt="https://www.gstatic.com/charts/loader.js";let Xt=null;const te=new Map;function ee(){return void 0!==window.google?Promise.resolve(window.google.charts):(null===Xt&&(Xt=new Promise((t=>{const e=document.querySelector('script[src="'.concat(Qt,'"]')),a=e||document.createElement("script");e||(a.src=Qt,a.type="text/javascript",document.head.append(a)),a.onload=()=>{void 0!==window.google&&t(window.google.charts)}}))),Xt)}async function ae(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",{packages:e=["corechart","controls"],language:a="en",mapsApiKey:s}=arguments.length>1?arguments[1]:void 0;const r=await ee(),i="".concat(t,"_").concat(e.join("_"),"_").concat(a);if(te.has(i))return te.get(i);const n=new Promise((i=>{r.load(t,{packages:e,language:a,mapsApiKey:s}),r.setOnLoadCallback((()=>i(window.google)))}));return te.set(i,n),n}function se(t,e,a){return null!==t&&e instanceof t.visualization.DataTable||null!==t&&e instanceof t.visualization.DataView?e:null!==t&&Array.isArray(e)?t.visualization.arrayToDataTable(e,a):null!==t&&null!==e&&"object"===typeof e?new t.visualization.DataTable(e):null}function re(t,e,a,s,r,i){const n=(t,e,a)=>{if(void 0===a)throw new Error("please, provide chart type property");return new e.visualization[a](t)};if(null===t)throw new Error("please, provide charts lib property");if(null===a)throw new Error("please, provide chart element property");const l=i||n;return e=l(a,t,s),ie(t,e,r),e}function ie(t,e,a){if(null!==a)for(const[s,r]of Object.entries(a))null!==t&&null!==e&&t.visualization.events.addListener(e,s,r)}function ne(t){let e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;function s(){return a}const r=function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];const n=this,l=function(){e=void 0,t.apply(n,r)};void 0!==e&&clearTimeout(e),e=setTimeout(l,s())};return r}let le=null;const oe=(0,s.aZ)({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(t,e){let{emit:a}=e;const r=(0,Gt.iH)(null),i=(0,Gt.iH)(null);function n(){if(null===le||null===r.value)return;const e=se(le,t.data,t.isFirstRowLabels);var a;null!==e&&(null===(a=r.value)||void 0===a||a.draw(e,t.options))}return(0,s.YP)((()=>t.data),(()=>n()),{deep:!0}),(0,s.YP)((()=>t.options),(()=>n()),{deep:!0}),(0,s.YP)((()=>t.type),(()=>{r.value=re(le,r.value,i.value,t.type,t.events,t.createChart),n()})),(0,s.bv)((()=>{ae(t.version,t.settings).then((e=>{void 0!==e&&(le=e,r.value=re(le,r.value,i.value,t.type,t.events,t.createChart),a("ready",r.value,e),n())})),t.resizeDebounce>0&&window.addEventListener("resize",ne(n,t.resizeDebounce))})),(0,s.Jd)((()=>{null!==r.value&&"function"===typeof r.value.clearChart&&r.value.clearChart(),t.resizeDebounce>0&&window.removeEventListener("resize",ne(n,t.resizeDebounce))})),()=>(0,s.h)("div",{ref:i},[])}}),de=(0,r.ri)({});function ue(){de.component("GChart",oe)}const ce={version:"1.1.0",install:ue};let he=null;"undefined"!==typeof window&&(he=window.Vue),null!==he&&void 0!==he&&de.use(ce);var pe={name:"StatisticsView",data:()=>({loading:!0,tabs:null,formSelect:null,roleUser:Kt.v.User,roleModer:Kt.v.Moderator,roleAdmin:Kt.v.Admin,roleSupAdmin:Kt.v.SuperAdmin,personalHeader:["Тип документа","Готов","Архив","Переделать","Черновик","Всего","%"],noDataMessage:"По вашему запросу статистика не найдена",content:[],selectTabName:null,allCountDocument:0,minDate:"",maxDate:"",employeesList:[],departmentList:[],departmentMap:{},facultyList:[],facultyMap:{},chartData:[["Тип документа","Количество"]],chartOption:{height:300},typeChart:"PieChart",filteredStatistics:{},chartId:1}),async mounted(){"ROLE_USER"!==this.currentUser.roles[0]&&await Ht.Z.getAllDepartmentUsers().then((t=>{this.employeesList=t.data}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")})),"ROLE_ADMIN"===this.currentUser.roles[0]&&(await Rt.Z.getDepartmentsAll().then((t=>{this.departmentList=t.data;for(let e of this.departmentList)this.departmentMap[e.name]=e.id}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")})),await Wt.Z.getAllFaculty().then((t=>{this.facultyList=t.data;for(let e of this.facultyList)this.facultyMap[e.name]=e.id}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")}))),setTimeout((()=>{this.tabs=M.Tabs.init(document.querySelectorAll(".tabs"),{}),this.selectTabName=document.querySelector(".tab a.active").innerText,this.formSelect=M.FormSelect.init(document.querySelectorAll("select"),{}),this.updateData()}),0),this.loading=!1},methods:{async getUserStatistics(t){await Et.Z.getUserStatistics(t,this.minDate,this.maxDate).then((t=>{this.createDataForTable(t.data)}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")}))},async getDepartmentStatistics(t){await Et.Z.getDepartmentStatistics(t,this.minDate,this.maxDate).then((t=>{this.createDataForTable(t.data)}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")}))},async getFacultyStatistics(t){await Et.Z.getFacultayStatistics(t,this.minDate,this.maxDate).then((t=>{this.createDataForTable(t.data)}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")}))},async getAllStatistics(){await Et.Z.getAllStatistics(this.minDate,this.maxDate).then((t=>{this.createDataForTable(t.data)}),(t=>{this.message=t.response&&t.response.data&&t.response.data.message||t.message||t.toString(),this.$error(Yt.Z[this.message]||"Что-то пошло не так")}))},createDataForTable(t){this.filteredStatistics={};let e={sum:0};this.allCountDocument=0;for(let a of t)void 0===this.filteredStatistics[a.typeName]&&(e={sum:0}),e[a.statusName]=a.count,e.sum+=a.count,this.allCountDocument+=a.count,this.filteredStatistics[a.typeName]=e;this.content=[],this.chartData=[["Тип документа","Количество"]];for(let a in this.filteredStatistics)this.content.push([{type:"text",shortTest:a.length<25?a:a.substr(0,25)+"...",text:a},{type:"onlyText",text:this.filteredStatistics[a]["Готов"]},{type:"onlyText",text:this.filteredStatistics[a]["Архив"]},{type:"onlyText",text:this.filteredStatistics[a]["Переделать"]},{type:"onlyText",text:this.filteredStatistics[a]["Черновик"]},{type:"onlyText",text:this.filteredStatistics[a].sum},{type:"onlyText",text:((this.filteredStatistics[a].sum/this.allCountDocument*100).toString().length<4?this.filteredStatistics[a].sum/this.allCountDocument*100:(this.filteredStatistics[a].sum/this.allCountDocument*100).toFixed(2))||0}]),this.chartData.push([a,this.filteredStatistics[a].sum])},selectTypeChart(t){if(this.typeChart!==t){if("PieChart"===t){this.chartData=[["Тип документа","Количество"]];for(let t in this.filteredStatistics)this.chartData.push([t,this.filteredStatistics[t].sum])}else if("ColumnChart"===t){this.chartData=[["Тип документа","Черновик","Переделать","Готов","Архив"]];for(let t in this.filteredStatistics)this.chartData.push([t,this.filteredStatistics[t]["Черновик"],this.filteredStatistics[t]["Переделать"],this.filteredStatistics[t]["Готов"],this.filteredStatistics[t]["Архив"]])}this.typeChart=t,this.chartId+=1}},async updateData(){if("Личная"===this.selectTabName)this.getUserStatistics(this.currentUser.id);else if("По пользователю"===this.selectTabName){let t=document.querySelector(".userStatistics li.selected");t.classList.contains("disabled")||await this.getUserStatistics(t.textContent.replace(/[^+\d]/g,""))}else if("По кафедре"===this.selectTabName)if("ROLE_ADMIN"===this.currentUser.roles[0]){let t=document.querySelector(".departmentStatistics li.selected");t.classList.contains("disabled")||await this.getDepartmentStatistics(this.departmentMap[t.textContent])}else{let t;await Ht.Z.getUserDepartment(this.currentUser.username).then((e=>{t=e.data.id})),await this.getDepartmentStatistics(t)}else if("По факультету"===this.selectTabName){let t=document.querySelector(".facultyStatistics li.selected");t.classList.contains("disabled")||await this.getFacultyStatistics(this.facultyMap[t.textContent])}else"По институту"===this.selectTabName&&await this.getAllStatistics();this.$message("Данные обновлены")},async updateSelectTab(t){if(this.selectTabName!==t)if("Личная"===t)await this.getUserStatistics(this.currentUser.id);else if("По пользователю"===t){let t=document.querySelector(".userStatistics li.selected");t.classList.contains("disabled")||await this.getUserStatistics(t.textContent.replace(/[^+\d]/g,""))}else if("По кафедре"===t)if("ROLE_ADMIN"===this.currentUser.roles[0]){let t=document.querySelector(".departmentStatistics li.selected");t.classList.contains("disabled")||await this.getDepartmentStatistics(this.departmentMap[t.textContent])}else{let t;await Ht.Z.getUserDepartment(this.currentUser.username).then((e=>{t=e.data.id})),await this.getDepartmentStatistics(t)}else if("По факультету"===t){let t=document.querySelector(".facultyStatistics li.selected");t.classList.contains("disabled")||await this.getFacultyStatistics(this.facultyMap[t.textContent])}else"По институту"===t&&await this.getAllStatistics();this.selectTabName=t},back(){this.$router.go(-1)}},computed:{currentUser(){return this.$store.state.auth.user}},beforeDestroy(){this.tabs&&this.tabs.destroy&&this.tabs.destroy(),this.formSelect&&this.formSelect.destroy&&this.formSelect.destroy()},components:{Sidebar:Vt.Z,FullScreenLoader:$t.Z,MainTable:Pt.Z,GChart:oe}},me=a(89);const ge=(0,me.Z)(pe,[["render",Ft]]);var ye=ge}}]);
//# sourceMappingURL=806.6589a31d.js.map