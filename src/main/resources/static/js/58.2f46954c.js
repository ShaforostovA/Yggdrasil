(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[58],{899:function(e,t,s){let a=s(3716);e.exports=({syllablesCount:e=3,minSyllableLength:t=2,maxSyllableLength:s=3,hasNumbers:a=!0,titlecased:i=!0,separators:l="",vowels:n="aeiouy",consonants:d="bcdfghjklmnpqrstvwxz"}={})=>r(e,(e=>{let m=t+o(s-t+1),c=r(m,(e=>{let t=e%2?n:d,s=t[o(t.length)];return i&&!e?s.toUpperCase():s}));return a&&(c+=o(10)),e&&l?l[o(l.length)]+c:c}));let r=(e,t)=>{for(var s=0,a="";s<e;s++)a+=t(s);return a},i=[],l=65535,n=l,o=e=>(n>=l&&(i=a(l),n=0),i[n++]%e)},3716:function(e,t,s){s(3767),s(8585),s(8696);let a=self.crypto||self.msCrypto;e.exports=e=>a.getRandomValues(new Uint8Array(e))},573:function(e,t,s){"use strict";var a=s(4161),r=s(2479);s(3456);const i="http://10.100.124.9/api/v1/department/";class l{getUserDepartmentAllUsers(e){return a.Z.get(i+`users/list/${e}`,{headers:(0,r.Z)()})}getDepartmentsAll(){return a.Z.get(i+"all",{headers:(0,r.Z)()})}getDepartmentsAllSearch(e,t,s,l,n,o,d,m){let c=JSON.stringify({parameter:e,currentPage:t,sortField:s,sortDir:l,facultyName:n,isActive:o,minDate:d,maxDate:m}),u={method:"post",maxBodyLength:1/0,url:i+"search/all",headers:(0,r.Z)(),data:c};return a.Z.request(u)}getDepartmentsActiveAll(){return a.Z.get(i+"active/all",{headers:(0,r.Z)()})}updateDepartment(e,t,s,l,n){let o=JSON.stringify({id:e,shortName:t,name:s,description:l,facultyId:Number(n)}),d={method:"post",maxBodyLength:1/0,url:i+"update",headers:(0,r.Z)(),data:o};return a.Z.request(d)}createDepartment(e,t,s,l,n){let o=JSON.stringify({id:e,shortName:t,name:s,description:l,facultyId:Number(n)}),d={method:"post",maxBodyLength:1/0,url:i+"create",headers:(0,r.Z)(),data:o};return a.Z.request(d)}}t["Z"]=new l},5753:function(e,t,s){"use strict";var a=s(4161),r=s(2479),i=s(3456);const l="http://10.100.124.9/api/v1/user/";class n{getUserInfo(){return a.Z.get(l+this.currentUser().username,{headers:(0,r.Z)()})}getEmployeeInfo(e){return a.Z.get(l+`profile/${e}/info`,{headers:(0,r.Z)()})}getUserFaculty(e){return a.Z.get(l+`${e}/faculty`,{headers:(0,r.Z)()})}getUserDepartment(e){return a.Z.get(l+`${e}/department`,{headers:(0,r.Z)()})}userTokenCheck(){return console.log((0,r.Z)()),a.Z.get(l+"token/check",{headers:(0,r.Z)()})}getAllUsers(){return a.Z.get(l+"list",{headers:(0,r.Z)()})}getAllDepartmentUsers(){return a.Z.get(l+"department/list",{headers:(0,r.Z)()})}getAllUsersFind(e,t,s,i,n,o,d,m,c,u){let h=JSON.stringify({parameter:e,currentPage:t,sortField:s,sortDir:i,minDate:n,maxDate:o,departmentName:d,isState:m,userRole:c,isActive:u}),p={method:"post",maxBodyLength:1/0,url:l+"list/find",headers:(0,r.Z)(),data:h};return a.Z.request(p)}updateProfile(e,t,s,i,n,o,d,m,c,u,h,p,g,v,w){let y=JSON.stringify({id:e,phone:t,email:s,imgUrl:i,lastName:n,name:o,patronymic:d,jobTitle:m,academicTitle:c,academicDegree:u,orcid:h,spinCode:p,birthday:g,state:v,departmentId:w}),x={method:"post",maxBodyLength:1/0,url:l+"update",headers:(0,r.Z)(),data:y};return a.Z.request(x)}checkValidUsername(e){let t=JSON.stringify({username:e}),s={method:"post",maxBodyLength:1/0,url:l+"username/check",headers:(0,r.Z)(),data:t};return a.Z.request(s)}createUser(e,t,s,i,n,o,d,m){let c=JSON.stringify({lastName:e,name:t,patronymic:s,state:i,departmentId:Number(n),username:o,password:d,userRole:m}),u={method:"post",maxBodyLength:1/0,url:l+"create",headers:(0,r.Z)(),data:c};return a.Z.request(u)}updateUserStatus(e,t){let s=JSON.stringify({userId:Number(e),isActive:t}),i={method:"post",maxBodyLength:1/0,url:l+"status/update",headers:(0,r.Z)(),data:s};return a.Z.request(i)}updateUserPassword(e,t){let s=JSON.stringify({userId:Number(e),password:t}),i={method:"post",maxBodyLength:1/0,url:l+"password/update",headers:(0,r.Z)(),data:s};return a.Z.request(i)}currentUser(){return i.Z.state.auth.user}}t["Z"]=new n},5058:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return be}});var a=s(3396),r=s(9242),i=s(7139);const l=(0,a._)("div",{class:"chapter-name text-3xl mb-6"}," Создание сотрудника ",-1),n={class:"flex gap-x-5 flex-grow"},o={class:"menu w-1/5"},d={class:"w-4/5"},m={key:1,class:"menu-top mb-6 flex justify-between"},c=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),u={class:"profile-data-input mb-3"},h=(0,a._)("label",{for:"",class:"relative required"},"Фамилия:",-1),p={class:"helper-text"},g={class:"profile-data-input mb-3"},v=(0,a._)("label",{for:"",class:"relative required"},"Имя:",-1),w={class:"helper-text"},y={class:"profile-data-input mb-5"},x=(0,a._)("label",{for:"",class:"relative required"},"Отчество:",-1),f={class:"helper-text"},b={class:"user-center-menu mb-5"},k=(0,a.uE)('<div class="menu-item flex gap-3 mb-5"><div class="profile-data-input menu-header"><label for="" class="relative required">Штатный сотрудник:</label></div><div class="form-radio block gap-3 input-field flex"><label class="block"><input type="radio" name="isState" checked id="1" class="form-radio-item with-gap block h-5 w-5"><span>Да</span></label><label class="block"><input type="radio" name="isState" id="0" class="form-radio-item with-gap block h-5 w-5"><span>Нет</span></label></div></div>',1),_={key:0,class:"menu-item"},$={class:"input-field col s12 department-data-input"},U=(0,a._)("label",{for:"",class:"relative required"},"Выберите кафедру:",-1),Z=(0,a._)("option",{value:"",disabled:"",selected:""},"Выберите кафедру",-1),C=["value"],S={class:"menu-item flex gap-3 mb-5"},D=(0,a._)("div",{class:"profile-data-input menu-header"},[(0,a._)("label",{for:"",class:"relative required"},"Роль:")],-1),q={class:"form-radio block gap-3 input-field flex"},L={class:"block"},N=["disabled"],B=(0,a._)("span",null,"Зав. кафедрой",-1),E={class:"block"},A=["disabled"],I=(0,a._)("span",null,"Преподаватель",-1),O={class:"profile-data-input mb-3"},z=(0,a._)("label",{for:"",class:"relative required"},"Логин:",-1),R={class:"flex gap-3"},T={class:"w-full"},V={class:"helper-text"},P={key:0,class:"validUsername self-center"},j={key:0,class:"",title:"Логин свободен."},H=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-green-600"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 00-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 01-.189-.866c0-.298.059-.605.189-.866zm2.023 6.828a.75.75 0 10-1.06-1.06 3.75 3.75 0 01-5.304 0 .75.75 0 00-1.06 1.06 5.25 5.25 0 007.424 0z","clip-rule":"evenodd"})],-1),J=[H],F={key:1,class:"",title:"Пользователь с таким логином уже существует!"},Y=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 text-red-700"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 00-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 01-.189-.866c0-.298.059-.605.189-.866zm-4.34 7.964a.75.75 0 01-1.061-1.06 5.236 5.236 0 013.73-1.538 5.236 5.236 0 013.695 1.538.75.75 0 11-1.061 1.06 3.736 3.736 0 00-2.639-1.098 3.736 3.736 0 00-2.664 1.098z","clip-rule":"evenodd"})],-1),K=[Y],W={class:"profile-data-input mb-6"},X=(0,a._)("label",{for:"",class:"relative"},"Пароль:",-1),G=(0,a._)("div",{class:"text-gray-500"},"Длина пароля не меньше 6 символов, если поле пустое, пароль будет автоматически сформирован.",-1),Q={class:"bottom-menu flex justify-end gap-5"},ee=["disabled"],te=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-6 h-6 mr-1"},[(0,a._)("path",{d:"M6.25 6.375a4.125 4.125 0 118.25 0 4.125 4.125 0 01-8.25 0zM3.25 19.125a7.125 7.125 0 0114.25 0v.003l-.001.119a.75.75 0 01-.363.63 13.067 13.067 0 01-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 01-.364-.63l-.001-.122zM19.75 7.5a.75.75 0 00-1.5 0v2.25H16a.75.75 0 000 1.5h2.25v2.25a.75.75 0 001.5 0v-2.25H22a.75.75 0 000-1.5h-2.25V7.5z"})],-1),se={key:3,class:"new-users"},ae={id:"myModel",class:"modal modal-fixed-footer",ref:"modal"},re=(0,a.uE)('<div class="modal-content flex flex-col"><div class="modal-img inline-block p-10 rounded-full border-[8px] border-solid border-red-700 text-red-700 mx-auto mb-5 font-bold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[8rem]"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg></div><div class="worn-text text-3xl text-red-700 mb-20 text-center">Внимание!</div><p class="text-2xl mb-3 text-center">При уходе с этой страницы данные будет потеряны.</p></div>',1),ie={class:"modal-footer flex justify-evenly"},le=(0,a._)("a",{href:"#",class:"modal-close main-btn-invers inline-block rounded-lg px-5 py-3 w-[150px] text-center text-xl"},"Остаться",-1);function ne(e,t,s,M,H,Y){const ne=(0,a.up)("FullScreenLoader"),oe=(0,a.up)("Sidebar"),de=(0,a.up)("Loader"),me=(0,a.up)("MainTable");return(0,a.wg)(),(0,a.iD)(a.HY,null,[this.createUserProcess?((0,a.wg)(),(0,a.j4)(ne,{key:0})):(0,a.kq)("",!0),l,(0,a._)("div",n,[(0,a._)("div",o,[(0,a.Wm)(oe)]),(0,a._)("div",d,[this.loading?((0,a.wg)(),(0,a.j4)(de,{key:0})):(0,a.kq)("",!0),this.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("button",{onClick:t[0]||(t[0]=(0,r.iM)(((...e)=>Y.back&&Y.back(...e)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[c,(0,a.Uk)(" Вернуться ")])])),this.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("form",{key:2,action:"",onSubmit:t[12]||(t[12]=(0,r.iM)(((...e)=>Y.createUser&&Y.createUser(...e)),["prevent"])),class:"shadow-md rounded-xl border p-5 mb-10"},[(0,a._)("div",u,[h,(0,a.wy)((0,a._)("input",{autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=t=>e.lastname=t),onBlur:t[2]||(t[2]=(...e)=>Y.canCreateCheck&&Y.canCreateCheck(...e)),class:(0,i.C_)([{invalid:M.v$.lastname.$errors.length},"input-text"]),minlength:"1",maxlength:"50",required:"",type:"text",name:"",id:"",placeholder:"Фамилия",title:"Введите фамилию"},null,34),[[r.nr,e.lastname,void 0,{trim:!0}]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.v$.lastname.$errors,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,a._)("div",p,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),(0,a._)("div",g,[v,(0,a.wy)((0,a._)("input",{autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=t=>e.name=t),onBlur:t[4]||(t[4]=(...e)=>Y.canCreateCheck&&Y.canCreateCheck(...e)),class:(0,i.C_)([{invalid:M.v$.name.$errors.length},"input-text"]),minlength:"1",maxlength:"50",required:"",type:"text",name:"",id:"",placeholder:"Имя",title:"Введите имя"},null,34),[[r.nr,e.name,void 0,{trim:!0}]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.v$.name.$errors,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,a._)("div",w,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),(0,a._)("div",y,[x,(0,a.wy)((0,a._)("input",{autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=t=>e.patronymic=t),onBlur:t[6]||(t[6]=(...e)=>Y.canCreateCheck&&Y.canCreateCheck(...e)),class:(0,i.C_)([{invalid:M.v$.patronymic.$errors.length},"input-text"]),minlength:"1",maxlength:"50",required:"",type:"text",name:"",id:"",placeholder:"Отчество",title:"Введите отчество"},null,34),[[r.nr,e.patronymic,void 0,{trim:!0}]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.v$.patronymic.$errors,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,a._)("div",f,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),(0,a._)("div",b,[k,this.$store.state.auth.user.roles[0]===e.role?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",$,[U,(0,a._)("select",{onBlur:t[7]||(t[7]=(...e)=>Y.canCreateCheck&&Y.canCreateCheck(...e))},[Z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.departments,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.id},(0,i.zw)(e.shortName),9,C)))),128))],32)])])):(0,a.kq)("",!0)]),(0,a._)("div",S,[D,(0,a._)("div",q,[(0,a._)("label",L,[(0,a._)("input",{type:"radio",name:"isModer",id:"1",disabled:"ROLE_SUPER_ADMIN"!==this.$store.state.auth.user.roles[0],class:"form-radio-item with-gap block h-5 w-5"},null,8,N),B]),(0,a._)("label",E,[(0,a._)("input",{type:"radio",name:"isModer",checked:"",id:"0",disabled:"ROLE_SUPER_ADMIN"!==this.$store.state.auth.user.roles[0],class:"form-radio-item with-gap block h-5 w-5"},null,8,A),I])])]),(0,a._)("div",O,[z,(0,a._)("div",R,[(0,a._)("div",T,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.username=t),onInput:t[9]||(t[9]=e=>(Y.canCreateCheck(),Y.checkInputUsername())),class:(0,i.C_)([{invalid:M.v$.username.$errors.length},"input-text"]),minlength:"6",maxlength:"50",required:"",type:"text",name:"",id:"",placeholder:"Логин",title:"Введите логин",autocomplete:"off"},null,34),[[r.nr,e.username,void 0,{trim:!0}]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(M.v$.username.$errors,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,a._)("div",V,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),this.inputUsername?((0,a.wg)(),(0,a.iD)("div",P,[this.validUsername?((0,a.wg)(),(0,a.iD)("div",j,J)):((0,a.wg)(),(0,a.iD)("div",F,K))])):(0,a.kq)("",!0)])]),(0,a._)("div",W,[X,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.password=t),onBlur:t[11]||(t[11]=(...e)=>Y.canCreateCheck&&Y.canCreateCheck(...e)),class:(0,i.C_)([{invalid:M.v$.password.$errors.length},"input-text"]),minlength:"6",maxlength:"50",type:"password",name:"",id:"",placeholder:"Пароль",title:"Введите пароль",autocomplete:"off"},null,34),[[r.nr,e.password,void 0,{trim:!0}]]),G]),(0,a._)("div",Q,[(0,a._)("button",{class:"main-btn px-6 py-4 text-xl inline-flex items-center",type:"submit",disabled:!this.canCreate},[te,(0,a.Uk)(" Сохранить ")],8,ee)])],32)),!this.loading&&this.showUserListData?((0,a.wg)(),(0,a.iD)("div",se,[(0,a.Wm)(me,{header:this.header,content:this.newUserList,noDataMessage:this.noDataMessage},null,8,["header","content","noDataMessage"])])):(0,a.kq)("",!0),(0,a._)("div",ae,[re,(0,a._)("div",ie,[(0,a._)("button",{onClick:t[13]||(t[13]=(0,r.iM)((e=>this.$router.go(-1)),["prevent"])),class:"main-btn inline-block px-5 py-3 w-[150px] text-center text-xl"},"Уйти"),le])],512)])])],64)}s(7658);var oe=s(2435),de=s(6833),me=s(6270),ce=s(573),ue=s(5753),he=s(899),pe=s.n(he),ge=s(3053),ve=s(9117),we=s(8806),ye={name:"EmployeeCreateView",setup(){return{v$:(0,ge.Xw)()}},data:()=>({loading:!0,formSelect:null,username:"",lastname:"",name:"",patronymic:"",password:"",isState:!0,canCreate:!1,departments:[],departmentsMap:{},role:we.v.SuperAdmin,validUsername:!1,inputUsername:!1,departmentId:"",isModer:!1,createUserProcess:!1,newUserList:[],showUserListData:!1,header:["№ пользователя","ФИО","Кафедра","Роль","Логин","Пароль",""],noDataMessage:"",modal:null}),validations(){return{lastname:{required:ve.C1,minLength:(0,ve.Ei)(1),maxLength:(0,ve.BS)(50)},name:{required:ve.C1,minLength:(0,ve.Ei)(1),maxLength:(0,ve.BS)(50)},patronymic:{required:ve.C1,minLength:(0,ve.Ei)(1),maxLength:(0,ve.BS)(50)},username:{required:ve.C1,minLength:(0,ve.Ei)(6),maxLength:(0,ve.BS)(50)},password:{minLength:(0,ve.Ei)(6),maxLength:(0,ve.BS)(50)}}},async mounted(){me.Z[this.$route.query.message]&&this.$message(me.Z[this.$route.query.message]),await ce.Z.getDepartmentsAll().then((e=>{this.departments=e.data;for(let t of this.departments)this.departmentsMap[t.shortName]=t.id}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(me.Z[this.message]||"Что-то пошло не так")})),setTimeout((()=>{this.formSelect=M.FormSelect.init(document.querySelectorAll("select"),{}),this.modal=M.Modal.init(this.$refs.modal)}),0),this.loading=!1},methods:{async checkInputUsername(){""!==this.username?this.inputUsername=!0:this.inputUsername=!1},async checkUsername(){""!==this.username&&await ue.Z.checkValidUsername(this.username).then((e=>{this.validUsername=e.data}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(me.Z[this.message]||"Что-то пошло не так")}))},async canCreateCheck(){this.canCreate=!1,await this.checkUsername(this.username),""!==this.username&&""!==this.lastname&&""!==this.name&&""!==this.patronymic&&this.validUsername&&("ROLE_SUPER_ADMIN"===this.$store.state.auth.user.roles[0]&&void 0===this.departmentsMap[document.querySelector(".select-wrapper li.selected").innerText]||(this.canCreate=!0))},async createUser(){if(this.v$.$invalid)return void this.v$.$touch();this.createUserProcess=!0,""===this.password&&(this.password="Nt"+pe()({syllablesCount:4,minSyllableLength:2,maxSyllableLength:2})+"!"),"ROLE_SUPER_ADMIN"===this.$store.state.auth.user.roles[0]?this.departmentId=this.departmentsMap[document.querySelector(".select-wrapper li.selected").innerText]:await ue.Z.getEmployeeInfo(this.$store.state.auth.user.id).then((e=>{this.departmentId=e.data.department.id}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(me.Z[this.message]||"Что-то пошло не так")})),this.isState=Boolean(Number(document.querySelector("input[type=radio][name=isState]:checked").id)),"ROLE_SUPER_ADMIN"===this.$store.state.auth.user.roles[0]&&(this.isModer=Boolean(Number(document.querySelector("input[type=radio][name=isModer]:checked").id)));let e=this.isModer?"moder":"user";await ue.Z.createUser(this.lastname,this.name,this.patronymic,this.isState,this.departmentId,this.username,this.password,e).then((e=>{let t=e.data;t.password=this.password,this.newUserList.push([{type:"id",text:t.id},{type:"text",text:t.lastName+" "+t.name+" "+t.patronymic,shortTest:t.lastName+" "+t.name[0]+". "+t.patronymic[0]+"."},{type:"text",text:t.department.name,shortTest:t.department.shortName},{type:"onlyText",text:"ROLE_MODERATOR"===t.roles[0].name?"Зав. кафедрой":"Преподаватель"},{type:"onlyText",text:t.username},{type:"onlyText",text:t.password},{type:"copy",text:`№: ${t.id}, ФИО: ${t.lastName+" "+t.name+" "+t.patronymic}, Кафедра: ${t.department.shortName}, Роль: ${"ROLE_MODERATOR"===t.roles[0].name?"Зав. кафедрой":"Преподаватель"}, Логин: ${t.username}, Пароль: ${t.password}`}]),this.showUserListData=!0,this.$message(`Пользователь №${e.data.id} создан`)}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(me.Z[this.message]||"Что-то пошло не так")})),this.lastname="",this.name="",this.patronymic="",this.username="",this.password="",this.createUserProcess=!1,this.inputUsername=!1,this.canCreate=!1},back(){""!==this.lastname||""!==this.name||""!==this.patronymic||""!==this.username||""!==this.password?this.modal.open():this.$router.go(-1)}},computed:{},watch:{},beforeDestroy(){this.formSelect&&this.formSelect.destroy&&this.formSelect.destroy(),this.modal&&this.modal.destroy&&this.modal.destroy()},components:{Sidebar:oe.Z,MainTable:de.Z}},xe=s(89);const fe=(0,xe.Z)(ye,[["render",ne]]);var be=fe}}]);
//# sourceMappingURL=58.2f46954c.js.map