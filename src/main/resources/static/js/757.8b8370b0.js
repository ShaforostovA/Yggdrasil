"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[757],{1352:function(e,t,r){var s=r(4161),a=r(2479);const o="http://178.130.131.227/api/v1/reports/";class n{getReport(e){return s.Z.get(o+e,{headers:(0,a.Z)()})}getAllReports(e,t,r,n,i,d,u,l){let p=JSON.stringify({parameter:e,currentPage:t,sortField:r,sortDir:n,statusName:i,minDate:d,maxDate:u,reportType:l}),c={method:"post",maxBodyLength:1/0,url:o+"all",headers:(0,a.Z)(),data:p};return s.Z.request(c)}getAllReportStructures(e,t,r,n,i,d,u,l){let p=JSON.stringify({parameter:e,currentPage:t,sortField:r,sortDir:n,isActive:i,minDate:d,maxDate:u,reportTypeName:l}),c={method:"post",maxBodyLength:1/0,url:o+"structures/all",headers:(0,a.Z)(),data:p};return s.Z.request(c)}getAllActiveReportStructures(){return s.Z.get(o+"structures/active/all",{headers:(0,a.Z)()})}getReportStructureById(e){return s.Z.get(o+"structures/"+e,{headers:(0,a.Z)()})}getAllReportTypes(){return s.Z.get(o+"types/all",{headers:(0,a.Z)()})}checkReportTypeName(e){let t=JSON.stringify({name:e}),r={method:"post",maxBodyLength:1/0,url:o+"types/check",headers:(0,a.Z)(),data:t};return s.Z.request(r)}createReportType(e){let t=JSON.stringify({name:e}),r={method:"post",maxBodyLength:1/0,url:o+"types/create",headers:(0,a.Z)(),data:t};return s.Z.request(r)}checkReportStructure(e){return s.Z.get(o+`structures/${e}/check`,{headers:(0,a.Z)()})}createReportStructure(e,t,r,n,i){let d=JSON.stringify({id:e,name:t,description:r,reportTypeId:n,structureData:JSON.stringify(i)}),u={method:"post",maxBodyLength:1/0,url:o+"structures/create",headers:(0,a.Z)(),data:d};return s.Z.request(u)}updateStatusReportStructure(e,t){let r=JSON.stringify({id:e,isActive:Boolean(t)}),n={method:"post",maxBodyLength:1/0,url:o+"structures/status/update",headers:(0,a.Z)(),data:r};return s.Z.request(n)}updateReportStructure(e,t,r,n,i){let d=JSON.stringify({id:e,name:t,description:r,reportTypeId:n,structureData:JSON.stringify(i)}),u={method:"post",maxBodyLength:1/0,url:o+"structures/update",headers:(0,a.Z)(),data:d};return s.Z.request(u)}getNewReportStructures(e){let t=JSON.stringify({oldReportStructureId:e}),r={method:"post",maxBodyLength:1/0,url:o+"structures/new/all",headers:(0,a.Z)(),data:t};return s.Z.request(r)}createReport(e,t,r,n,i,d){let u=JSON.stringify({reportData:JSON.stringify(e),dateStart:t,dateEnd:r,reportStructureId:n,userId:i,reportStatusId:d}),l={method:"post",maxBodyLength:1/0,url:o+"create",headers:(0,a.Z)(),data:u};return s.Z.request(l)}updateReport(e,t,r,n,i,d,u){let l=JSON.stringify({reportId:e,reportData:JSON.stringify(t),dateStart:r,dateEnd:n,reportStructureId:i,userId:d,reportStatusId:u}),p={method:"post",maxBodyLength:1/0,url:o+"update",headers:(0,a.Z)(),data:l};return s.Z.request(p)}updateReportStatus(e,t){let r=JSON.stringify({reportId:e,statusId:t}),n={method:"post",maxBodyLength:1/0,url:o+"status/update",headers:(0,a.Z)(),data:r};return s.Z.request(n)}updateReportChange(e,t){let r=JSON.stringify({reportId:e,canChange:t}),n={method:"post",maxBodyLength:1/0,url:o+"change/update",headers:(0,a.Z)(),data:r};return s.Z.request(n)}deleteReport(e){return s.Z["delete"](o+"delete/"+e,{headers:(0,a.Z)()})}updateReportType(e,t){let r=JSON.stringify({reportTypeName:t}),n={method:"post",maxBodyLength:1/0,url:o+"types/update/"+e,headers:(0,a.Z)(),data:r};return s.Z.request(n)}}t["Z"]=new n},2435:function(e,t,r){r.d(t,{Z:function(){return p}});var s=r(3396),a=r(7139);const o={class:"shadow-md rounded-xl overflow-hidden border"};function n(e,t,r,n,i,d){const u=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("ul",o,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.links,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.url},[e.roles.includes(this.currentUser.roles[0])?((0,s.wg)(),(0,s.j4)(u,{key:0,"active-class":"active",to:e.url,class:"hover:bg-gray-200 pl-5 py-2 block select-none"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.title),1)])),_:2},1032,["to"])):(0,s.kq)("",!0)])))),128))])}var i=r(8806),d={data:()=>({links:[{title:"Документы",url:"/documents",roles:[i.v.User,i.v.Admin,i.v.Moderator]},{title:"Отчеты",url:"/reports",roles:[i.v.Admin,i.v.Moderator]},{title:"Факультеты",url:"/facultets",roles:[i.v.SuperAdmin]},{title:"Кафедры",url:"/departments",roles:[i.v.SuperAdmin]},{title:"Сотрудники",url:"/employees",roles:[i.v.SuperAdmin,i.v.Moderator]},{title:"Студенты",url:"/students",roles:[i.v.User,i.v.SuperAdmin,i.v.Moderator]},{title:"Конструктор шаблонов",url:"/constructors",roles:[i.v.SuperAdmin]},{title:"Статистика",url:"/statistics",roles:[i.v.User,i.v.Admin,i.v.Moderator]},{title:"Разное",url:"/different",roles:[i.v.SuperAdmin]}]}),computed:{currentUser(){return this.$store.state.auth.user}}},u=r(89);const l=(0,u.Z)(d,[["render",n]]);var p=l},757:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var s=r(3396),a=r(7139),o=r(9242);const n={class:"chapter-name text-3xl mb-6"},i={class:"flex gap-x-5"},d={class:"menu w-1/5"},u={class:"w-4/5"},l={key:1,class:"department-body mb-10"},p={class:"menu-top mb-6 flex justify-between"},c=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),h={class:"shadow-md rounded-xl border p-5"},m={class:"department-data-input"},g=(0,s._)("label",{for:"",class:"relative required"},"Название ключевого слова:",-1),y=["disabled"],v={class:"department-bottom-menu flex justify-end gap-5"},w=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1),f=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1),k={key:2,class:"main-btn px-5 py-3 text-xl inline-flex items-center",type:"submit"},Z=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1);function x(e,t,r,x,S,b){const N=(0,s.up)("Sidebar"),T=(0,s.up)("Loader");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",n," Кафедра — "+(0,a.zw)(this.reportTypeId),1),(0,s._)("div",i,[(0,s._)("div",d,[(0,s.Wm)(N)]),(0,s._)("div",u,[this.loading?((0,s.wg)(),(0,s.j4)(T,{key:0})):((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",p,[(0,s._)("button",{onClick:t[0]||(t[0]=(0,o.iM)(((...e)=>this.back&&this.back(...e)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[c,(0,s.Uk)(" Вернуться ")])]),(0,s._)("div",h,[(0,s._)("form",{action:"",class:"department-form",onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>this.updateDocumentType&&this.updateDocumentType(...e)),["prevent"]))},[(0,s._)("div",m,[g,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.reportTypeName=t),minlength:"1",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Название ключевого слова",title:"Введите название ключевого слова",disabled:!this.updateMode},null,8,y),[[o.nr,e.reportTypeName,void 0,{trim:!0}]])]),(0,s._)("div",v,[this.updateMode?this.updateMode?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"main-btn-red px-5 py-3 text-xl inline-flex items-center",onClick:t[3]||(t[3]=(0,o.iM)(((...e)=>b.rajectChanges&&b.rajectChanges(...e)),["prevent"]))},[f,(0,s.Uk)(" Отменить ")])):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"main-btn px-5 py-3 text-xl inline-flex items-center",onClick:t[2]||(t[2]=(0,o.iM)(((...e)=>b.changeOperationMode&&b.changeOperationMode(...e)),["prevent"]))},[w,(0,s.Uk)(" Редактировать ")])),this.updateMode?((0,s.wg)(),(0,s.iD)("button",k,[Z,(0,s.Uk)(" Сохранить ")])):(0,s.kq)("",!0)])],32)])]))])])],64)}var S=r(2435),b=r(6270),N=r(1352),T={name:"ReportTypeView",props:["reportTypeId"],data:()=>({loading:!0,reportTypeName:"",updateMode:!1}),async mounted(){b.Z[this.$route.query.message]&&this.$message(b.Z[this.$route.query.message]),await this.findReportType(),setTimeout((()=>{}),0),this.loading=!1},methods:{async findReportType(){await N.Z.getAllReportTypes().then((e=>{for(let t of e.data)if(Number(t.id)===Number(this.reportTypeId)){this.reportTypeName=t.name;break}}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(b.Z[this.message]||"Что-то пошло не так")}))},changeOperationMode(){this.updateMode=!0,this.$message("Включен режим редактирования")},async rajectChanges(){this.updateMode=!1,await this.findReportType(),this.$message("Отмена изменений")},async updateDocumentType(){await N.Z.updateReportType(this.reportTypeId,this.reportTypeName).then((e=>{this.updateMode=!1,this.$message("Тип отчета обновлен")}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(b.Z[this.message]||"Что-то пошло не так")}))},back(){this.$router.go(-1)}},beforeDestroy(){},components:{Sidebar:S.Z}},M=r(89);const R=(0,M.Z)(T,[["render",x]]);var _=R}}]);
//# sourceMappingURL=757.8b8370b0.js.map