"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[507],{6749:function(e,t,l){var r=l(4161),a=l(2479);const s="http://178.130.131.227/api/v1/faculty/";class i{getAllFaculty(){return r.Z.get(s+"all",{headers:(0,a.Z)()})}getAllFacultySearch(e,t,l,i,n,o,u){let d=JSON.stringify({parameter:e,currentPage:t,sortField:l,sortDir:i,isActive:n,minDate:o,maxDate:u}),c={method:"post",maxBodyLength:1/0,url:s+"search/all",headers:(0,a.Z)(),data:d};return r.Z.request(c)}getAllActiveFaculty(){return r.Z.get(s+"active/all",{headers:(0,a.Z)()})}getFaculty(e){return r.Z.get(s+e,{headers:(0,a.Z)()})}updateFaculty(e,t,l,i){let n=JSON.stringify({id:Number(e),shortName:t,name:l,description:i}),o={method:"post",maxBodyLength:1/0,url:s+"update",headers:(0,a.Z)(),data:n};return r.Z.request(o)}createFaculty(e,t,l){let i=JSON.stringify({id:null,shortName:e,name:t,description:l}),n={method:"post",maxBodyLength:1/0,url:s+"create",headers:(0,a.Z)(),data:i};return r.Z.request(n)}}t["Z"]=new i},2435:function(e,t,l){l.d(t,{Z:function(){return c}});var r=l(3396),a=l(7139);const s={class:"shadow-md rounded-xl overflow-hidden border"};function i(e,t,l,i,n,o){const u=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("ul",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.links,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.url},[e.roles.includes(this.currentUser.roles[0])?((0,r.wg)(),(0,r.j4)(u,{key:0,"active-class":"active",to:e.url,class:"hover:bg-gray-200 pl-5 py-2 block select-none"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.title),1)])),_:2},1032,["to"])):(0,r.kq)("",!0)])))),128))])}var n=l(8806),o={data:()=>({links:[{title:"Документы",url:"/documents",roles:[n.v.User,n.v.Admin,n.v.Moderator]},{title:"Отчеты",url:"/reports",roles:[n.v.Admin,n.v.Moderator]},{title:"Факультеты",url:"/facultets",roles:[n.v.SuperAdmin]},{title:"Кафедры",url:"/departments",roles:[n.v.SuperAdmin]},{title:"Сотрудники",url:"/employees",roles:[n.v.SuperAdmin,n.v.Moderator]},{title:"Студенты",url:"/students",roles:[n.v.User,n.v.SuperAdmin,n.v.Moderator]},{title:"Конструктор шаблонов",url:"/constructors",roles:[n.v.SuperAdmin]},{title:"Статистика",url:"/statistics",roles:[n.v.User,n.v.Admin,n.v.Moderator]},{title:"Разное",url:"/different",roles:[n.v.SuperAdmin]}]}),computed:{currentUser(){return this.$store.state.auth.user}}},u=l(89);const d=(0,u.Z)(o,[["render",i]]);var c=d},3507:function(e,t,l){l.r(t),l.d(t,{default:function(){return U}});var r=l(3396),a=l(9242);const s=(0,r._)("div",{class:"chapter-name text-3xl mb-6"}," Факультет — Создание ",-1),i={class:"flex gap-x-5"},n={class:"menu w-1/5"},o={class:"w-4/5"},u={key:1,class:"menu-top mb-6 flex justify-between"},d=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),c={key:2,class:"faculty-body shadow-md rounded-xl overflow-hidden border p-5 mb-10"},m={class:"faculty-data-input"},h=(0,r._)("label",{for:"",class:"relative required"},"Короткое название факультета:",-1),p={class:"faculty-data-input"},y=(0,r._)("label",{for:"",class:"relative required"},"Полное название факультета:",-1),f={class:"faculty-data-input"},v=(0,r._)("label",{for:"",class:"relative"},"Описание факультета:",-1),g=(0,r._)("div",{class:"faculty-bottom-menu flex justify-end gap-5"},[(0,r._)("button",{class:"main-btn px-6 py-4 text-xl inline-flex items-center",type:"submit"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})]),(0,r.Uk)(" Сохранить ")])],-1),x={id:"myModel",class:"modal modal-fixed-footer",ref:"modal"},w=(0,r.uE)('<div class="modal-content flex flex-col"><div class="modal-img inline-block p-10 rounded-full border-[8px] border-solid border-red-700 text-red-700 mx-auto mb-5 font-bold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[8rem]"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg></div><div class="worn-text text-3xl text-red-700 mb-20 text-center">Внимание!</div><p class="text-2xl mb-3 text-center">При уходе с этой страницы данные будет потеряны.</p></div>',1),k={class:"modal-footer flex justify-evenly"},b=(0,r._)("a",{href:"#",class:"modal-close main-btn-invers inline-block rounded-lg px-5 py-3 w-[150px] text-center text-xl"},"Остаться",-1);function S(e,t,l,S,_,N){const Z=(0,r.up)("FullScreenLoader"),L=(0,r.up)("Sidebar"),D=(0,r.up)("Loader");return(0,r.wg)(),(0,r.iD)(r.HY,null,[this.fullScreenLoading?((0,r.wg)(),(0,r.j4)(Z,{key:0})):(0,r.kq)("",!0),s,(0,r._)("div",i,[(0,r._)("div",n,[(0,r.Wm)(L)]),(0,r._)("div",o,[this.loading?((0,r.wg)(),(0,r.j4)(D,{key:0})):(0,r.kq)("",!0),this.loading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("button",{onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>N.back&&N.back(...e)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[d,(0,r.Uk)(" Вернуться ")])])),this.loading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("form",{action:"",class:"faculty-form",onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>N.createFaculty&&N.createFaculty(...e)),["prevent"]))},[(0,r._)("div",m,[h,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.facultyShortName=t),minlength:"1",maxlength:"25",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Короткое название факультета",title:"Введите короткое название факультета"},null,512),[[a.nr,e.facultyShortName,void 0,{trim:!0}]])]),(0,r._)("div",p,[y,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.facultyName=t),minlength:"1",maxlength:"255",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Полное название факультета",title:"Введите полное название факультета"},null,512),[[a.nr,e.facultyName,void 0,{trim:!0}]])]),(0,r._)("div",f,[v,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.facultyDescrition=t),name:"",id:"",class:"input-text h-36",placeholder:"Описание факультета",maxlength:"255",title:"Введите описание факультета"},null,512),[[a.nr,e.facultyDescrition,void 0,{trim:!0}]])]),g],32)])),(0,r._)("div",x,[w,(0,r._)("div",k,[(0,r._)("button",{onClick:t[5]||(t[5]=(0,a.iM)((e=>this.$router.go(-1)),["prevent"])),class:"main-btn inline-block px-5 py-3 w-[150px] text-center text-xl"},"Уйти"),b])],512)])])],64)}var _=l(2435),N=l(6270),Z=l(6749),L=l(7901),D=l(9117),F={name:"FacultyCreate",data:()=>({loading:!0,facultyShortName:"",facultyName:"",facultyDescrition:"",message:"",newFaculty:null,fullScreenLoading:!1,modal:null}),validations(){return{facultyShortName:{required:D.C1,minLength:(0,D.Ei)(1)},facultyName:{required:D.C1,minLength:(0,D.Ei)(1)},facultyDescrition:{minLength:(0,D.Ei)(0),maxLength:(0,D.BS)(255)}}},async mounted(){N.Z[this.$route.query.message]&&this.$message(N.Z[this.$route.query.message]),setTimeout((()=>{this.modal=M.Modal.init(this.$refs.modal)}),0),this.loading=!1},methods:{createFaculty(){""!==this.facultyShortName&&""!==this.facultyName?(this.fullScreenLoading=!0,Z.Z.createFaculty(this.facultyShortName,this.facultyName,this.facultyDescrition).then((e=>{this.newFaculty=e.data,this.$message(`Факультет №${this.newFaculty.id} создан`)}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(N.Z[this.message]||"Что-то пошло не так")})),this.facultyName="",this.facultyShortName="",this.facultyDescrition="",this.fullScreenLoading=!1):this.$error("Заполните все обязательные поля")},back(){""!==this.facultyName||""!==this.facultyShortName||""!==this.facultyDescrition?this.modal.open():this.$router.go(-1)}},beforeDestroy(){this.modal&&this.modal.destroy&&this.modal.destroy()},components:{Sidebar:_.Z,FullScreenLoader:L.Z}},q=l(89);const A=(0,q.Z)(F,[["render",S]]);var U=A}}]);
//# sourceMappingURL=507.4dc883b9.js.map