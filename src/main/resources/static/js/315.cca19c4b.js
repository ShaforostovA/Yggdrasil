"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[315],{8573:function(e,t,s){var r=s(4161),o=s(2479);const n="http://10.100.124.9/api/v1/keywords/";class d{getKeyWords(){return r.Z.get(n+"all",{headers:(0,o.Z)()})}attachKeyWord(e,t){let s=JSON.stringify({keyWords:t}),d={method:"post",maxBodyLength:1/0,url:n+"add/"+e,headers:(0,o.Z)(),data:s};return r.Z.request(d)}getDocumentKeyWords(e){return r.Z.get(n+"document/"+e,{headers:(0,o.Z)()})}updateKeyWord(e,t){let s=JSON.stringify({keyWordName:t}),d={method:"post",maxBodyLength:1/0,url:n+"update/"+e,headers:(0,o.Z)(),data:s};return r.Z.request(d)}deleteKeyWord(e){return r.Z["delete"](n+"delete/"+e,{headers:(0,o.Z)()})}}t["Z"]=new d},2435:function(e,t,s){s.d(t,{Z:function(){return m}});var r=s(3396),o=s(7139);const n={class:"shadow-md rounded-xl overflow-hidden border"};function d(e,t,s,d,a,i){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("ul",n,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.links,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.url},[e.roles.includes(this.currentUser.roles[0])?((0,r.wg)(),(0,r.j4)(l,{key:0,"active-class":"active",to:e.url,class:"hover:bg-gray-200 pl-5 py-2 block select-none"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.title),1)])),_:2},1032,["to"])):(0,r.kq)("",!0)])))),128))])}var a=s(8806),i={data:()=>({links:[{title:"Документы",url:"/documents",roles:[a.v.User,a.v.Admin,a.v.Moderator]},{title:"Отчеты",url:"/reports",roles:[a.v.Admin,a.v.Moderator]},{title:"Факультеты",url:"/facultets",roles:[a.v.SuperAdmin]},{title:"Кафедры",url:"/departments",roles:[a.v.SuperAdmin]},{title:"Сотрудники",url:"/employees",roles:[a.v.SuperAdmin,a.v.Moderator]},{title:"Студенты",url:"/students",roles:[a.v.User,a.v.SuperAdmin,a.v.Moderator]},{title:"Конструктор шаблонов",url:"/constructors",roles:[a.v.SuperAdmin]},{title:"Статистика",url:"/statistics",roles:[a.v.User,a.v.Admin,a.v.Moderator]},{title:"Разное",url:"/different",roles:[a.v.SuperAdmin]}]}),computed:{currentUser(){return this.$store.state.auth.user}}},l=s(89);const u=(0,l.Z)(i,[["render",d]]);var m=u},7030:function(e,t,s){s.r(t),s.d(t,{default:function(){return B}});var r=s(3396),o=s(7139),n=s(9242);const d={class:"chapter-name text-3xl mb-6"},a={class:"flex gap-x-5"},i={class:"menu w-1/5"},l={class:"w-4/5"},u={key:1,class:"department-body mb-10"},m={class:"menu-top mb-6 flex justify-between"},c=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),h=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),p={id:"modelDelete",class:"modal modal-fixed-footer"},g={class:"modal-content flex flex-col"},v=(0,r._)("div",{class:"modal-img inline-block p-10 rounded-full border-[8px] border-solid border-red-700 text-red-700 mx-auto mb-5 font-bold"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-[8rem]"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1),k=(0,r._)("div",{class:"worn-text text-3xl text-red-700 mb-20 text-center"},"Внимание!",-1),w={class:"text-2xl mb-3 text-center"},y={class:"modal-footer flex justify-evenly"},x=(0,r._)("a",{href:"#",class:"modal-close main-btn-invers inline-block rounded-lg px-5 py-3 w-[150px] text-center text-xl"},"Отмена",-1),f={class:"shadow-md rounded-xl border p-5"},b={class:"department-data-input"},_=(0,r._)("label",{for:"",class:"relative required"},"Название ключевого слова:",-1),W=["disabled"],Z={class:"department-bottom-menu flex justify-end gap-5"},K=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})],-1),D=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1),C={key:2,class:"main-btn px-5 py-3 text-xl inline-flex items-center",type:"submit"},L=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,r._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1);function S(e,t,s,M,S,j){const $=(0,r.up)("Sidebar"),U=(0,r.up)("Loader");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",d," Кафедра — "+(0,o.zw)(this.keyWordId),1),(0,r._)("div",a,[(0,r._)("div",i,[(0,r.Wm)($)]),(0,r._)("div",l,[this.loading?((0,r.wg)(),(0,r.j4)(U,{key:0})):((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",m,[(0,r._)("button",{onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>this.back&&this.back(...e)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[c,(0,r.Uk)(" Вернуться ")]),(0,r._)("button",{class:"flex main-btn-red py-3 px-5",onClick:t[1]||(t[1]=(0,n.iM)(((...e)=>this.deleteModalOpen&&this.deleteModalOpen(...e)),["prevent"]))},[h,(0,r.Uk)(" Удалить ")]),(0,r._)("div",p,[(0,r._)("div",g,[v,k,(0,r._)("p",w,"Вы действительно хотите удалить ключевое слово №"+(0,o.zw)(this.keyWordId)+"?",1)]),(0,r._)("div",y,[(0,r._)("button",{class:"main-btn-red inline-block px-5 py-3 w-[150px] text-center text-xl",onClick:t[2]||(t[2]=(...e)=>j.deleteKeyWord&&j.deleteKeyWord(...e))},"Да"),x])])]),(0,r._)("div",f,[(0,r._)("form",{action:"",class:"department-form",onSubmit:t[6]||(t[6]=(0,n.iM)(((...e)=>this.updateKeyWord&&this.updateKeyWord(...e)),["prevent"]))},[(0,r._)("div",b,[_,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.keyWordName=t),minlength:"1",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Название ключевого слова",title:"Введите название ключевого слова",disabled:!this.updateMode},null,8,W),[[n.nr,e.keyWordName,void 0,{trim:!0}]])]),(0,r._)("div",Z,[this.updateMode?this.updateMode?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"main-btn-red px-5 py-3 text-xl inline-flex items-center",onClick:t[5]||(t[5]=(0,n.iM)(((...e)=>j.rajectChanges&&j.rajectChanges(...e)),["prevent"]))},[D,(0,r.Uk)(" Отменить ")])):(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"main-btn px-5 py-3 text-xl inline-flex items-center",onClick:t[4]||(t[4]=(0,n.iM)(((...e)=>j.changeOperationMode&&j.changeOperationMode(...e)),["prevent"]))},[K,(0,r.Uk)(" Редактировать ")])),this.updateMode?((0,r.wg)(),(0,r.iD)("button",C,[L,(0,r.Uk)(" Сохранить ")])):(0,r.kq)("",!0)])],32)])]))])])],64)}s(7658);var j=s(2435),$=s(6270),U=s(8573),A={name:"Keyword",props:["keyWordId"],data:()=>({loading:!0,keyWordName:"",updateMode:!1,modalDelete:null}),async mounted(){$.Z[this.$route.query.message]&&this.$message($.Z[this.$route.query.message]),await this.findKeyWord(),setTimeout((()=>{this.modalDelete=M.Modal.init(document.querySelector(".modal"),{})}),10),this.loading=!1},methods:{async findKeyWord(){await U.Z.getKeyWords().then((e=>{for(let t of e.data)if(Number(t.id)===Number(this.keyWordId)){this.keyWordName=t.name;break}}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error($.Z[this.message]||"Что-то пошло не так")}))},changeOperationMode(){this.updateMode=!0,this.$message("Включен режим редактирования")},async rajectChanges(){this.updateMode=!1,await this.findKeyWord(),this.$message("Отмена изменений")},async updateKeyWord(){await U.Z.updateKeyWord(this.keyWordId,this.keyWordName).then((e=>{this.updateMode=!1,this.$message("Ключевое слово обновлено")}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error($.Z[this.message]||"Что-то пошло не так")}))},deleteModalOpen(){this.modalDelete.open()},async deleteKeyWord(){await U.Z.deleteKeyWord(this.keyWordId).then((e=>{this.updateMode=!1,this.modalDelete.close(),this.$message(`Ключевое слово №${this.keyWordId} удалено`),setTimeout((()=>{this.$router.push("/different")}),500)}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error($.Z[this.message]||"Что-то пошло не так")}))},back(){this.$router.go(-1)}},beforeDestroy(){this.modalDelete&&this.modalDelete.destroy&&this.modalDelete.destroy()},components:{Sidebar:j.Z}},q=s(89);const N=(0,q.Z)(A,[["render",S]]);var B=N}}]);
//# sourceMappingURL=315.cca19c4b.js.map