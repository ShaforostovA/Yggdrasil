"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[679],{7679:function(e,s,t){t.r(s),t.d(s,{default:function(){return y}});var r=t(3396),a=t(9242),i=t(7139);const n=(0,r._)("h2",{class:"text-4xl text-center mb-10 select-none"},"Авторизация",-1),u={class:""},o={class:"mb-4"},l={class:"helper-text"},d={class:"mb-16"},m={class:"helper-text"},g=["disabled"];function h(e,s,t,h,p,c){return(0,r.wg)(),(0,r.iD)("form",{class:"form-login bg-white px-16 py-14 rounded-lg",onSubmit:s[2]||(s[2]=(0,a.iM)(((...e)=>c.submitLogin&&c.submitLogin(...e)),["prevent"]))},[n,(0,r._)("div",u,[(0,r._)("div",o,[(0,r.wy)((0,r._)("input",{title:"Введите логин",type:"text",name:"username",id:"username",placeholder:"Логин","onUpdate:modelValue":s[0]||(s[0]=e=>p.username=e),class:(0,i.C_)(["input-text mb-1",{invalid:h.v$.username.$errors.length}])},null,2),[[a.nr,p.username,void 0,{trim:!0}]]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.v$.username.$errors,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,r._)("div",l,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),(0,r._)("div",d,[(0,r.wy)((0,r._)("input",{title:"Введите пароль","onUpdate:modelValue":s[1]||(s[1]=e=>p.password=e),class:(0,i.C_)([{invalid:h.v$.password.$errors.length},"input-text"]),type:"password",name:"password",id:"",placeholder:"Пароль"},null,2),[[a.nr,p.password,void 0,{trim:!0}]]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.v$.password.$errors,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"input-errors max-w-xl",key:e.$uid},[(0,r._)("div",m,(0,i.zw)("This field should be at least 6 characters long"===e.$message?"Длина этого поля должна составлять не менее 6 символов":"Value is required"===e.$message?"Значение является обязательным":e.$message),1)])))),128))]),(0,r._)("button",{class:"main-btn block w-full py-2 rounded-lg text-2xl",type:"submit",disabled:p.loading},"Войти",8,g)])],32)}t(7658);var p=t(3053),c=t(9117),$=t(6270),w={name:"LoginView",setup(){return{v$:(0,p.Xw)()}},data(){return{loading:!1,username:"",password:"",message:""}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},validations(){return{username:{required:c.C1,minLength:(0,c.Ei)(6)},password:{required:c.C1,minLength:(0,c.Ei)(6)}}},mounted(){$.Z[this.$route.query.message]&&this.$message($.Z[this.$route.query.message])},methods:{submitLogin(){if(this.v$.$invalid)return void this.v$.$touch();const e={username:this.username,password:this.password};this.$store.dispatch("auth/login",e).then((()=>{this.$router.push({name:"home"})}),(e=>{$.Z[this.$route.query.message]&&this.$message($.Z[this.$route.query.message]),this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error($.Z[this.message]||"Что-то пошло не так")}))}},watch:{async $route(){$.Z[this.$route.query.message]&&this.$message($.Z[this.$route.query.message])}}},v=t(89);const b=(0,v.Z)(w,[["render",h]]);var y=b}}]);
//# sourceMappingURL=679.f9fdf99c.js.map