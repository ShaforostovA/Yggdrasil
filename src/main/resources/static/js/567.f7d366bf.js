"use strict";(self["webpackChunkyggdrasil_client"]=self["webpackChunkyggdrasil_client"]||[]).push([[567],{573:function(e,t,r){var a=r(4161),l=r(2479);r(3456);const s="http://10.100.124.9/api/v1/department/";class n{getUserDepartmentAllUsers(e){return a.Z.get(s+`users/list/${e}`,{headers:(0,l.Z)()})}getDepartmentsAll(){return a.Z.get(s+"all",{headers:(0,l.Z)()})}getDepartmentsAllSearch(e,t,r,n,i,o,d,m){let u=JSON.stringify({parameter:e,currentPage:t,sortField:r,sortDir:n,facultyName:i,isActive:o,minDate:d,maxDate:m}),c={method:"post",maxBodyLength:1/0,url:s+"search/all",headers:(0,l.Z)(),data:u};return a.Z.request(c)}getDepartmentsActiveAll(){return a.Z.get(s+"active/all",{headers:(0,l.Z)()})}updateDepartment(e,t,r,n,i){let o=JSON.stringify({id:e,shortName:t,name:r,description:n,facultyId:Number(i)}),d={method:"post",maxBodyLength:1/0,url:s+"update",headers:(0,l.Z)(),data:o};return a.Z.request(d)}createDepartment(e,t,r,n,i){let o=JSON.stringify({id:e,shortName:t,name:r,description:n,facultyId:Number(i)}),d={method:"post",maxBodyLength:1/0,url:s+"create",headers:(0,l.Z)(),data:o};return a.Z.request(d)}}t["Z"]=new n},6749:function(e,t,r){var a=r(4161),l=r(2479);const s="http://10.100.124.9/api/v1/faculty/";class n{getAllFaculty(){return a.Z.get(s+"all",{headers:(0,l.Z)()})}getAllFacultySearch(e,t,r,n,i,o,d){let m=JSON.stringify({parameter:e,currentPage:t,sortField:r,sortDir:n,isActive:i,minDate:o,maxDate:d}),u={method:"post",maxBodyLength:1/0,url:s+"search/all",headers:(0,l.Z)(),data:m};return a.Z.request(u)}getAllActiveFaculty(){return a.Z.get(s+"active/all",{headers:(0,l.Z)()})}getFaculty(e){return a.Z.get(s+e,{headers:(0,l.Z)()})}updateFaculty(e,t,r,n){let i=JSON.stringify({id:Number(e),shortName:t,name:r,description:n}),o={method:"post",maxBodyLength:1/0,url:s+"update",headers:(0,l.Z)(),data:i};return a.Z.request(o)}createFaculty(e,t,r){let n=JSON.stringify({id:null,shortName:e,name:t,description:r}),i={method:"post",maxBodyLength:1/0,url:s+"create",headers:(0,l.Z)(),data:n};return a.Z.request(i)}}t["Z"]=new n},2435:function(e,t,r){r.d(t,{Z:function(){return u}});var a=r(3396),l=r(7139);const s={class:"shadow-md rounded-xl overflow-hidden border"};function n(e,t,r,n,i,o){const d=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("ul",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.links,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.url},[e.roles.includes(this.currentUser.roles[0])?((0,a.wg)(),(0,a.j4)(d,{key:0,"active-class":"active",to:e.url,class:"hover:bg-gray-200 pl-5 py-2 block select-none"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.title),1)])),_:2},1032,["to"])):(0,a.kq)("",!0)])))),128))])}var i=r(8806),o={data:()=>({links:[{title:"Документы",url:"/documents",roles:[i.v.User,i.v.Admin,i.v.Moderator]},{title:"Отчеты",url:"/reports",roles:[i.v.Admin,i.v.Moderator]},{title:"Факультеты",url:"/facultets",roles:[i.v.SuperAdmin]},{title:"Кафедры",url:"/departments",roles:[i.v.SuperAdmin]},{title:"Сотрудники",url:"/employees",roles:[i.v.SuperAdmin,i.v.Moderator]},{title:"Студенты",url:"/students",roles:[i.v.User,i.v.SuperAdmin,i.v.Moderator]},{title:"Конструктор шаблонов",url:"/constructors",roles:[i.v.SuperAdmin]},{title:"Статистика",url:"/statistics",roles:[i.v.User,i.v.Admin,i.v.Moderator]},{title:"Разное",url:"/different",roles:[i.v.SuperAdmin]}]}),computed:{currentUser(){return this.$store.state.auth.user}}},d=r(89);const m=(0,d.Z)(o,[["render",n]]);var u=m},8567:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var a=r(3396),l=r(9242),s=r(7139);const n=(0,a._)("div",{class:"chapter-name text-3xl mb-6"}," Кафедры — Создание ",-1),i={class:"flex gap-x-5"},o={class:"menu w-1/5"},d={class:"w-4/5"},m={key:1,class:"menu-top mb-6 flex justify-between"},u=(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),c={key:2,class:"department-body shadow-md rounded-xl border p-5 mb-10"},p={class:"department-data-input"},h=(0,a._)("label",{for:"",class:"relative required"},"Короткое название кафедры:",-1),g={class:"department-data-input"},v=(0,a._)("label",{for:"",class:"relative required"},"Полное название кафедры:",-1),f={class:"input-field col s12 department-data-input"},y=(0,a._)("label",{for:"",class:"relative required"},"Выберите факультет:",-1),x=(0,a._)("option",{value:"",disabled:"",selected:""},"Выберите факультет",-1),w=["value"],b={class:"department-data-input"},k=(0,a._)("label",{for:"",class:"relative"},"Описание кафедры:",-1),S=(0,a._)("div",{class:"faculty-bottom-menu flex justify-end gap-5"},[(0,a._)("button",{class:"main-btn px-6 py-4 text-xl inline-flex items-center",type:"submit"},[(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 mr-1"},[(0,a._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})]),(0,a.Uk)(" Сохранить ")])],-1),D={id:"myModel",class:"modal modal-fixed-footer",ref:"modal"},Z=(0,a.uE)('<div class="modal-content flex flex-col"><div class="modal-img inline-block p-10 rounded-full border-[8px] border-solid border-red-700 text-red-700 mx-auto mb-5 font-bold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-[8rem]"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg></div><div class="worn-text text-3xl text-red-700 mb-20 text-center">Внимание!</div><p class="text-2xl mb-3 text-center">При уходе с этой страницы данные будет потеряны.</p></div>',1),N={class:"modal-footer flex justify-evenly"},_=(0,a._)("a",{href:"#",class:"modal-close main-btn-invers inline-block rounded-lg px-5 py-3 w-[150px] text-center text-xl"},"Остаться",-1);function A(e,t,r,A,q,L){const M=(0,a.up)("FullScreenLoader"),F=(0,a.up)("Sidebar"),U=(0,a.up)("Loader");return(0,a.wg)(),(0,a.iD)(a.HY,null,[this.fullScreenLoading?((0,a.wg)(),(0,a.j4)(M,{key:0})):(0,a.kq)("",!0),n,(0,a._)("div",i,[(0,a._)("div",o,[(0,a.Wm)(F)]),(0,a._)("div",d,[this.loading?((0,a.wg)(),(0,a.j4)(U,{key:0})):(0,a.kq)("",!0),this.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("button",{onClick:t[0]||(t[0]=(0,l.iM)(((...e)=>L.back&&L.back(...e)),["prevent"])),class:"main-btn py-3 px-5 inline-flex"},[u,(0,a.Uk)(" Вернуться ")])])),this.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("form",{action:"",class:"faculty-form",onSubmit:t[4]||(t[4]=(0,l.iM)(((...e)=>L.createDepartment&&L.createDepartment(...e)),["prevent"]))},[(0,a._)("div",p,[h,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.departmentShortName=t),minlength:"1",maxlength:"25",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Короткое название кафедры",title:"Введите короткое название кафедры"},null,512),[[l.nr,e.departmentShortName,void 0,{trim:!0}]])]),(0,a._)("div",g,[v,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.departmentName=t),minlength:"1",maxlength:"255",required:"",type:"text",name:"",id:"",class:"input-text",placeholder:"Полное название кафедры",title:"Введите полное название кафедры"},null,512),[[l.nr,e.departmentName,void 0,{trim:!0}]])]),(0,a._)("div",f,[y,(0,a._)("select",null,[x,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.facultets,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.id},(0,s.zw)(e.shortName),9,w)))),128))])]),(0,a._)("div",b,[k,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.departmentDescrition=t),name:"",id:"",class:"input-text h-36",placeholder:"Описание кафедры",maxlength:"255",title:"Введите описание кафедры"},null,512),[[l.nr,e.departmentDescrition,void 0,{trim:!0}]])]),S],32)])),(0,a._)("div",D,[Z,(0,a._)("div",N,[(0,a._)("button",{onClick:t[5]||(t[5]=(0,l.iM)((e=>this.$router.go(-1)),["prevent"])),class:"main-btn inline-block px-5 py-3 w-[150px] text-center text-xl"},"Уйти"),_])],512)])])],64)}var q=r(2435),L=r(6270),F=r(6749),U=r(7901),C=r(9117),$=r(573),B={name:"DepartmentCreate",data:()=>({loading:!0,formSelect:null,departmentShortName:"",departmentName:"",departmentDescrition:"",message:"",newFaculty:null,fullScreenLoading:!1,facultets:[],facultyMap:{},newDepartment:null,modal:null}),validations(){return{departmentShortName:{required:C.C1,minLength:(0,C.Ei)(1)},departmentName:{required:C.C1,minLength:(0,C.Ei)(1)},departmentDescrition:{minLength:(0,C.Ei)(0),maxLength:(0,C.BS)(255)}}},async mounted(){L.Z[this.$route.query.message]&&this.$message(L.Z[this.$route.query.message]),await F.Z.getAllFaculty().then((e=>{this.facultets=e.data;for(let t of this.facultets)this.facultyMap[t.shortName]=t.id})),setTimeout((()=>{this.formSelect=M.FormSelect.init(document.querySelectorAll("select"),{}),this.modal=M.Modal.init(this.$refs.modal)}),0),this.loading=!1},methods:{createDepartment(){""!==this.departmentShortName&&""!==this.departmentName&&void 0!==this.facultyMap[document.querySelector(".selected").textContent]?(this.fullScreenLoading=!0,$.Z.createDepartment(null,this.departmentShortName,this.departmentName,this.departmentDescrition,this.facultyMap[document.querySelector(".selected").textContent]).then((e=>{this.newDepartment=e.data,this.$message(`Кафедра №${this.newDepartment.id} создана`)}),(e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$error(L.Z[this.message]||"Что-то пошло не так")})),this.departmentName="",this.departmentShortName="",this.departmentDescrition="",this.fullScreenLoading=!1):this.$error("Заполните все обязательные поля")},back(){""!==this.departmentName||""!==this.departmentShortName||""!==this.departmentDescrition?this.modal.open():this.$router.go(-1)}},beforeDestroy(){this.formSelect&&this.formSelect.destroy&&this.formSelect.destroy(),this.modal&&this.modal.destroy&&this.modal.destroy()},components:{Sidebar:q.Z,FullScreenLoader:U.Z}},j=r(89);const J=(0,j.Z)(B,[["render",A]]);var O=J}}]);
//# sourceMappingURL=567.f7d366bf.js.map